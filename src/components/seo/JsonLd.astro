---
/**
 * JsonLd â€” renders a <script type="application/ld+json"> tag.
 *
 * Accepts a plain JS object that gets JSON-stringified into the tag.
 * Callers are responsible for building the correct schema.org structure.
 *
 * Usage:
 *   <JsonLd data={{ "@context": "https://schema.org", "@type": "Article", ... }} />
 */
interface Props {
  data: Record<string, unknown>;
}

const { data } = Astro.props;

function serializeJsonLd(payload: Record<string, unknown>): string {
  return JSON.stringify(payload).replace(/</g, "\\u003c");
}

const jsonLd = serializeJsonLd(data);
---

<script type="application/ld+json" is:inline set:html={jsonLd} />
