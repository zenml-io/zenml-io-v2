---
/**
 * BlogHero — editorial hero for the featured blog post (page 1 only).
 *
 * Two-column layout: text left, image right. No scroll-reveal (above the fold).
 * Gradient background from primary-50 to white.
 */
import Image from "../Image.astro";

interface Props {
  href: string;
  title: string;
  excerpt?: string;
  image?: { url: string; alt?: string; width?: number; height?: number };
  categoryName?: string;
  categorySlug?: string;
  publishedDate?: Date;
  readingTime?: string;
  authorName?: string;
  authorSlug?: string;
  authorAvatar?: { url: string; alt?: string };
}

const {
  href,
  title,
  excerpt,
  image,
  categoryName,
  categorySlug,
  publishedDate,
  readingTime,
  authorName,
  authorSlug,
  authorAvatar,
} = Astro.props;

const formattedDate = publishedDate
  ? new Intl.DateTimeFormat("en-US", { month: "short", day: "numeric", year: "numeric" }).format(publishedDate)
  : undefined;
---

<section class="bg-linear-to-t from-primary-50 to-white border-b border-gray-200">
  <div class="mx-auto max-w-[1440px] px-4 py-12 sm:px-6 sm:py-16 lg:px-8">
    <div class="grid items-center gap-8 lg:grid-cols-2 lg:gap-12">
      {/* Left: text content */}
      <div>
        {/* Meta line: category · date · reading time */}
        <div class="mb-4 flex flex-wrap items-center gap-2 text-sm text-gray-500">
          {categoryName && (
            <>
              {categorySlug ? (
                <a
                  href={`/category/${categorySlug}`}
                  class="inline-flex items-center rounded-full bg-primary-50 px-2.5 py-0.5 text-xs font-semibold text-primary-700 transition-colors hover:bg-primary-100"
                  style="mix-blend-mode:multiply"
                >
                  {categoryName}
                </a>
              ) : (
                <span class="inline-flex items-center rounded-full bg-primary-50 px-2.5 py-0.5 text-xs font-semibold text-primary-700" style="mix-blend-mode:multiply">
                  {categoryName}
                </span>
              )}
              {(formattedDate || readingTime) && (
                <span class="text-gray-300" aria-hidden="true">&middot;</span>
              )}
            </>
          )}
          {formattedDate && <span>{formattedDate}</span>}
          {formattedDate && readingTime && (
            <span class="text-gray-300" aria-hidden="true">&middot;</span>
          )}
          {readingTime && <span>{readingTime}</span>}
        </div>

        {/* Title */}
        <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">
          <a href={href} class="transition-colors hover:text-primary-600">
            {title}
          </a>
        </h2>

        {/* Excerpt */}
        {excerpt && (
          <p class="mt-4 text-base leading-relaxed text-gray-600 line-clamp-3">
            {excerpt}
          </p>
        )}

        {/* Author + read link */}
        <div class="mt-6 flex items-center gap-3 text-sm text-gray-500">
          {authorAvatar && (
            <img
              src={authorAvatar.url}
              alt={authorAvatar.alt || authorName || ""}
              class="h-8 w-8 rounded-full object-cover"
              loading="eager"
            />
          )}
          {authorName && (
            authorSlug ? (
              <a href={`/author/${authorSlug}`} class="font-medium text-gray-700 hover:text-primary-600">
                {authorName}
              </a>
            ) : (
              <span class="font-medium text-gray-700">{authorName}</span>
            )
          )}
          <span class="text-gray-300" aria-hidden="true">&middot;</span>
          <a href={href} class="font-medium text-primary-600 hover:text-primary-700">
            Read article &rarr;
          </a>
        </div>
      </div>

      {/* Right: image */}
      {image && (
        <a href={href} class="block overflow-hidden rounded-md">
          <Image
            image={image}
            alt={image.alt || title}
            class="aspect-[3/2] w-full rounded-md object-cover transition-transform duration-300 hover:scale-[1.02]"
            loading="eager"
          />
        </a>
      )}
    </div>
  </div>
</section>
