---
/**
 * BlogSidebar â€” left sidebar with category navigation and popular tags.
 * Used on the blog hub page for topic-led discovery.
 */
import type { TaxonomyCount } from "../../lib/blog";

interface Props {
  categories: TaxonomyCount[];
  popularTags: TaxonomyCount[];
  /** Highlight the current category/tag if on a taxonomy page */
  activeCategory?: string;
  activeTag?: string;
}

const { categories, popularTags, activeCategory, activeTag } = Astro.props;
---

<aside class="hidden lg:block">
  <div class="sticky top-24 space-y-8">
    {/* Categories */}
    <div>
      <h3 class="mb-3 text-xs font-semibold uppercase tracking-wider text-gray-400">
        Categories
      </h3>
      <nav class="space-y-0.5" aria-label="Blog categories">
        <a
          href="/blog"
          class:list={[
            "flex items-center justify-between rounded-lg px-3 py-2 text-sm transition-colors",
            !activeCategory
              ? "bg-primary-50 font-medium text-primary-700"
              : "text-gray-700 hover:bg-gray-50 hover:text-primary-600",
          ]}
        >
          All posts
        </a>
        {categories.map((cat) => (
          <a
            href={`/category/${cat.slug}`}
            class:list={[
              "flex items-center justify-between rounded-lg px-3 py-2 text-sm transition-colors",
              activeCategory === cat.slug
                ? "bg-primary-50 font-medium text-primary-700"
                : "text-gray-700 hover:bg-gray-50 hover:text-primary-600",
            ]}
          >
            <span>{cat.name}</span>
            <span class="text-xs text-gray-400">{cat.count}</span>
          </a>
        ))}
      </nav>
    </div>

    {/* Popular Tags */}
    <div>
      <h3 class="mb-3 text-xs font-semibold uppercase tracking-wider text-gray-400">
        Popular Tags
      </h3>
      <div class="flex flex-wrap gap-1.5">
        {popularTags.slice(0, 12).map((tag) => (
          <a
            href={`/tags/${tag.slug}`}
            class:list={[
              "inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium transition-colors",
              activeTag === tag.slug
                ? "bg-primary-600 text-white"
                : "bg-gray-100 text-gray-700 hover:bg-primary-50 hover:text-primary-700",
            ]}
          >
            {tag.name}
          </a>
        ))}
      </div>
    </div>
  </div>
</aside>
