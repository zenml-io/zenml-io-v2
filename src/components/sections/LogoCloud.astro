---
/**
 * LogoCloud â€” infinite-scrolling trust bar showing customer/partner logos.
 *
 * All logos scroll continuously in a single row. The logo set is
 * duplicated in the DOM to create a seamless loop via CSS animation.
 * Pauses on hover. Faded edges mask the scroll boundaries.
 *
 * Accepts optional props to customise label, logos, and background.
 * Falls back to homepage LOGO_CLOUD data when no props are provided.
 */
import { LOGO_CLOUD, type LogoItem } from "../../lib/homepage";

interface Props {
  label?: string;
  logos?: LogoItem[];
  /** Tailwind classes for the outer <section> background. */
  bgClass?: string;
  /** Tailwind class for the fade-edge gradient "from" color (must match bg). */
  fadeFromClass?: string;
}

const {
  label = LOGO_CLOUD.label,
  logos = LOGO_CLOUD.logos,
  bgClass = "border-y border-gray-100 bg-gray-50",
  fadeFromClass = "from-gray-50",
} = Astro.props;
---

<section class:list={[bgClass, "py-10 sm:py-12"]}>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <h2 class="text-center text-xl font-bold text-gray-900 sm:text-2xl">
      {label}
    </h2>
  </div>

  <!-- Marquee container -->
  <div class="logo-marquee-wrap group relative mt-8 overflow-hidden">
    <!-- Fade edges -->
    <div class:list={["pointer-events-none absolute inset-y-0 left-0 z-10 w-16 bg-gradient-to-r to-transparent sm:w-24", fadeFromClass]}></div>
    <div class:list={["pointer-events-none absolute inset-y-0 right-0 z-10 w-16 bg-gradient-to-l to-transparent sm:w-24", fadeFromClass]}></div>

    <div class="logo-marquee-track flex items-center gap-12 group-hover:[animation-play-state:paused] sm:gap-16">
      {/* Render logos twice for seamless loop */}
      {[...logos, ...logos].map((logo) => (
        <div class="flex h-10 w-[120px] flex-shrink-0 items-center justify-center">
          <img
            src={logo.src}
            alt={logo.name}
            class="max-h-9 max-w-[120px] object-contain"
            width="120"
            height="36"
            loading="lazy"
          />
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  @keyframes logo-scroll {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
  }
  .logo-marquee-track {
    animation: logo-scroll 45s linear infinite;
    width: max-content;
  }
  @media (prefers-reduced-motion: reduce) {
    .logo-marquee-track {
      animation: none;
      flex-wrap: wrap;
      justify-content: center;
      width: auto;
    }
  }
</style>
