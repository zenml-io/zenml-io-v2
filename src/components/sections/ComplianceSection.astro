---
/**
 * ComplianceSection — vertical stack layout matching Webflow:
 * centered header → full-width architecture diagram → compliance badge banner.
 * Includes scroll-triggered reveal animations.
 */
import { COMPLIANCE } from "../../lib/homepage";
---

<section class="bg-gray-50 py-16 sm:py-24" data-reveal-scope="compliance">
  <div class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8">
    <!-- Centered header -->
    <div class="mx-auto max-w-3xl text-center" data-reveal>
      <p class="text-sm font-semibold uppercase tracking-wider text-zenml-500">
        {COMPLIANCE.eyebrow}
      </p>
      <h2 class="mt-2 text-3xl font-bold text-gray-900 sm:text-4xl">
        {COMPLIANCE.headline}
      </h2>
      <p class="mt-4 text-lg text-gray-600">{COMPLIANCE.body}</p>
    </div>

    <!-- Full-width architecture diagram -->
    <div class="mt-10 flex justify-center" data-reveal style="transition-delay:80ms">
      <picture>
        <source media="(max-width: 767px)" srcset={COMPLIANCE.architectureImageMobile} />
        <img
          src={COMPLIANCE.architectureImage}
          alt="ZenML architecture — metadata layer on top of your infrastructure"
          class="w-full max-w-[960px] h-auto"
          loading="lazy"
        />
      </picture>
    </div>

    <!-- Compliance badge banner -->
    <div class="mx-auto mt-8 mb-8 flex max-w-[90%] flex-col items-center gap-6 rounded-xl border border-gray-300 bg-white p-6 sm:flex-row sm:items-center sm:gap-8" data-reveal style="transition-delay:160ms">
      <div class="flex shrink-0 items-center gap-6">
        <img
          src={COMPLIANCE.soc2Badge}
          alt="SOC2 Type II certified"
          class="h-20 w-auto object-contain"
          loading="lazy"
        />
        <img
          src={COMPLIANCE.iso27001Badge}
          alt="ISO 27001 certified"
          class="h-20 w-auto object-contain"
          loading="lazy"
        />
      </div>
      <div class="text-center sm:text-left sm:border-l sm:border-gray-200 sm:pl-8">
        <h3 class="text-xl font-bold text-gray-900">
          {COMPLIANCE.badgeHeadline}
        </h3>
        <p class="mt-1 text-sm font-semibold text-zenml-500">
          {COMPLIANCE.badgeSubheadline}
        </p>
        <p class="mt-2 text-sm leading-relaxed text-gray-600">
          {COMPLIANCE.badgeBody}
        </p>
      </div>
    </div>
  </div>
</section>

<style>
  [data-reveal] {
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  [data-reveal].in-view {
    opacity: 1;
    transform: translateY(0);
  }
  @media (prefers-reduced-motion: reduce) {
    [data-reveal] {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
</style>

<script>
  const section = document.querySelector('[data-reveal-scope="compliance"]');
  if (section) {
    const revealEls = section.querySelectorAll("[data-reveal]");
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("in-view");
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1, rootMargin: "0px 0px -40px 0px" },
    );
    revealEls.forEach((el) => observer.observe(el));
  }
</script>
