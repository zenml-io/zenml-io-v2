---
/**
 * ValueProps — 4-item grid of value propositions with a bottom CTA.
 *
 * Matches Webflow's uui-layout33 pattern: 2×2 grid on a gray background,
 * each item has a colored icon square (3.5rem), heading (1.5rem bold),
 * and body text (1rem). No card borders or backgrounds — content sits
 * directly on the section background. Grid: 4rem col-gap, 3rem row-gap.
 */
import { VALUE_PROPS, VALUE_PROPS_CTA } from "../../lib/homepage";
---

<section class="bg-gray-50 py-16 sm:py-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="scroll-reveal-grid grid gap-y-10 sm:grid-cols-2 sm:gap-x-16 sm:gap-y-12">
      {VALUE_PROPS.map((prop) => (
        <div class="scroll-slide-left">
          <div
            class="flex h-14 w-14 items-center justify-center rounded-lg"
            style={`background-color: ${prop.iconBg}`}
          >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              {prop.iconPaths.map((d) => (
                <path
                  d={d}
                  stroke={prop.iconMode === "stroke" ? prop.iconColor : "none"}
                  fill={prop.iconMode === "fill" ? prop.iconColor : "none"}
                  stroke-width={prop.iconMode === "stroke" ? "2" : undefined}
                  stroke-linecap={prop.iconMode === "stroke" ? "round" : undefined}
                  stroke-linejoin={prop.iconMode === "stroke" ? "round" : undefined}
                />
              ))}
            </svg>
          </div>
          <h3 class="mt-5 text-2xl font-bold leading-snug text-gray-900">{prop.title}</h3>
          <p class="mt-2 text-base leading-relaxed text-gray-600">{prop.description}</p>
        </div>
      ))}
    </div>

    <!-- CTA banner — purple gradient with horizontal layout matching Webflow -->
    <div class="mt-16 flex flex-col items-start gap-6 rounded-2xl bg-gradient-to-r from-[#7C3AED] via-[#8B5CF6] to-[#A78BFA] px-8 py-8 sm:flex-row sm:items-center sm:justify-between sm:px-12 sm:py-10">
      <div class="max-w-xl">
        <h2 class="text-2xl font-bold text-white sm:text-3xl">
          {VALUE_PROPS_CTA.headline}
        </h2>
        <p class="mt-2 text-base leading-relaxed text-white/80">
          {VALUE_PROPS_CTA.subtext}
        </p>
      </div>
      <div class="flex shrink-0 items-center gap-3">
        <a
          href={VALUE_PROPS_CTA.primaryCta.href}
          class="inline-flex items-center justify-center rounded-md bg-gray-900 px-5 py-3 text-base font-semibold text-white shadow-button transition-all duration-200 hover:bg-gray-800"
        >
          {VALUE_PROPS_CTA.primaryCta.label}
        </a>
        <a
          href={VALUE_PROPS_CTA.secondaryCta.href}
          class="inline-flex items-center justify-center rounded-md border border-white/20 bg-white px-5 py-3 text-base font-semibold text-gray-900 shadow-button transition-all duration-200 hover:bg-gray-100"
        >
          {VALUE_PROPS_CTA.secondaryCta.label}
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  /* Slide-in-from-left animation for value prop cards */
  .scroll-slide-left {
    opacity: 0;
    transform: translateX(-50px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  /* Staggered delays matching Webflow: 0, 100, 200, 300ms */
  .scroll-slide-left:nth-child(1) { transition-delay: 0s; }
  .scroll-slide-left:nth-child(2) { transition-delay: 0.1s; }
  .scroll-slide-left:nth-child(3) { transition-delay: 0.2s; }
  .scroll-slide-left:nth-child(4) { transition-delay: 0.3s; }

  /* Revealed state */
  .scroll-reveal-grid.in-view .scroll-slide-left {
    opacity: 1;
    transform: translateX(0);
  }

  /* Respect reduced-motion preference */
  @media (prefers-reduced-motion: reduce) {
    .scroll-slide-left {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
</style>

<script>
  const grid = document.querySelector('.scroll-reveal-grid');
  if (grid) {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          grid.classList.add('in-view');
          observer.disconnect();
        }
      },
      { threshold: 0.15 }
    );
    observer.observe(grid);
  }
</script>
