---
/**
 * Footer — multi-column footer matching the zenml.io Webflow site.
 * Structure: brand/social | primary columns | VS columns | extended columns | legal
 */
import {
  FOOTER_PRIMARY,
  FOOTER_VS,
  FOOTER_EXTENDED,
  FOOTER_SOCIAL,
  FOOTER_LEGAL,
  type SocialPlatform,
} from "../lib/footer";

const currentYear = new Date().getFullYear();

/** Inline SVGs for social icons — extracted from Webflow production site */
const SOCIAL_ICONS: Record<SocialPlatform, string> = {
  linkedin: `<svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22.2234 0H1.77187C0.792187 0 0 0.773438 0 1.72969V22.2656C0 23.2219 0.792187 24 1.77187 24H22.2234C23.2031 24 24 23.2219 24 22.2703V1.72969C24 0.773438 23.2031 0 22.2234 0ZM7.12031 20.4516H3.55781V8.99531H7.12031V20.4516ZM5.33906 7.43438C4.19531 7.43438 3.27188 6.51094 3.27188 5.37187C3.27188 4.23281 4.19531 3.30937 5.33906 3.30937C6.47813 3.30937 7.40156 4.23281 7.40156 5.37187C7.40156 6.50625 6.47813 7.43438 5.33906 7.43438ZM20.4516 20.4516H16.8937V14.8828C16.8937 13.5562 16.8703 11.8453 15.0422 11.8453C13.1906 11.8453 12.9094 13.2937 12.9094 14.7891V20.4516H9.35625V8.99531H12.7687V10.5609H12.8156C13.2891 9.66094 14.4516 8.70938 16.1813 8.70938C19.7859 8.70938 20.4516 11.0813 20.4516 14.1656V20.4516Z" fill="currentColor"/></svg>`,
  x: `<svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.058593 1L9.32417 13.5613L0 23.7697H2.09852L10.2622 14.8305L16.86 23.7702H23.9995L14.212 10.5047L22.8912 1H20.7926L13.2745 9.23144L7.19956 1H0.058593ZM3.14482 2.56723H6.42554L20.9118 22.2025H17.6321L3.14482 2.56723Z" fill="currentColor"/></svg>`,
  slack: `<svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.00787 15.0047C5.00787 16.3843 3.89291 17.4992 2.51339 17.4992C1.13386 17.4992 0.0188976 16.3843 0.0188976 15.0047C0.0188976 13.6252 1.13386 12.5102 2.51339 12.5102H5.00787V15.0047ZM6.25512 15.0047C6.25512 13.6252 7.37008 12.5102 8.74961 12.5102C10.1291 12.5102 11.2441 13.6252 11.2441 15.0047V21.2409C11.2441 22.6205 10.1291 23.7354 8.74961 23.7354C7.37008 23.7354 6.25512 22.6205 6.25512 21.2409V15.0047Z" fill="currentColor"/><path d="M8.74961 4.98898C7.37008 4.98898 6.25512 3.87402 6.25512 2.49449C6.25512 1.11496 7.37008 0 8.74961 0C10.1291 0 11.2441 1.11496 11.2441 2.49449V4.98898H8.74961ZM8.74961 6.25512C10.1291 6.25512 11.2441 7.37008 11.2441 8.74961C11.2441 10.1291 10.1291 11.2441 8.74961 11.2441H2.49449C1.11496 11.2441 0 10.1291 0 8.74961C0 7.37008 1.11496 6.25512 2.49449 6.25512H8.74961Z" fill="currentColor"/><path d="M18.7465 8.74961C18.7465 7.37008 19.8614 6.25512 21.2409 6.25512C22.6205 6.25512 23.7354 7.37008 23.7354 8.74961C23.7354 10.1291 22.6205 11.2441 21.2409 11.2441H18.7465V8.74961ZM17.4992 8.74961C17.4992 10.1291 16.3843 11.2441 15.0047 11.2441C13.6252 11.2441 12.5102 10.1291 12.5102 8.74961V2.49449C12.5102 1.11496 13.6252 0 15.0047 0C16.3843 0 17.4992 1.11496 17.4992 2.49449V8.74961Z" fill="currentColor"/><path d="M15.0047 18.7465C16.3843 18.7465 17.4992 19.8614 17.4992 21.2409C17.4992 22.6205 16.3843 23.7354 15.0047 23.7354C13.6252 23.7354 12.5102 22.6205 12.5102 21.2409V18.7465H15.0047ZM15.0047 17.4992C13.6252 17.4992 12.5102 16.3843 12.5102 15.0047C12.5102 13.6252 13.6252 12.5102 15.0047 12.5102H21.2598C22.6394 12.5102 23.7543 13.6252 23.7543 15.0047C23.7543 16.3843 22.6394 17.4992 21.2598 17.4992H15.0047Z" fill="currentColor"/></svg>`,
  youtube: `<svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H24V24H0V0Z" fill="currentColor"/><path d="M11.995 6.33781C11.995 6.33781 6.93749 6.33782 5.66813 6.66766C4.98846 6.85756 4.42881 7.41722 4.23891 8.10688C3.90907 9.37625 3.90906 12.005 3.90906 12.005C3.90906 12.005 3.90907 14.6437 4.23891 15.8931C4.42881 16.5828 4.97847 17.1324 5.66813 17.3223C6.94749 17.6622 11.995 17.6622 11.995 17.6622C11.995 17.6622 17.0625 17.6622 18.3319 17.3323C19.0215 17.1424 19.5712 16.6028 19.7511 15.9031C20.0909 14.6437 20.0909 12.015 20.0909 12.015C20.0909 12.015 20.1009 9.37625 19.7511 8.10688C19.5712 7.41722 19.0215 6.86757 18.3319 6.68766C17.0625 6.33783 11.995 6.33781 11.995 6.33781ZM10.3858 9.57625L14.5938 12.005L10.3858 14.4238V9.57625Z" fill="white"/></svg>`,
};
---

<footer class="border-t border-gray-200 bg-white">
  <div class="mx-auto max-w-[var(--container-lg)] px-4 sm:px-6 lg:px-8">
    <div class="py-12 lg:py-16">
      {/* Top section: brand + primary columns */}
      <div class="grid grid-cols-1 gap-8 lg:grid-cols-12 lg:gap-12">
        {/* Brand column */}
        <div class="lg:col-span-3">
          <a href="/" class="inline-block">
            <img
              src="/images/zenml-logo.svg"
              alt="ZenML"
              width="115"
              height="28"
              class="h-7 w-auto"
            />
          </a>
          <p class="mt-4 text-sm text-gray-600">Simplify MLOps</p>

          {/* Social icons */}
          <div class="mt-6 flex gap-3">
            {FOOTER_SOCIAL.map((social) => (
              <a
                href={social.href}
                target="_blank"
                rel="noopener noreferrer"
                class="flex h-9 w-9 items-center justify-center rounded-md text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700"
                aria-label={social.label}
              >
                <Fragment set:html={SOCIAL_ICONS[social.platform]} />
              </a>
            ))}
          </div>

          {/* Member logos */}
          <div class="mt-6 flex items-center gap-4">
            <img src="/images/lf-member.svg" alt="Linux Foundation Member" width="80" class="h-auto opacity-60" />
            <img src="/images/cncf-member.svg" alt="CNCF Member" width="140" class="h-auto opacity-60" />
          </div>
        </div>

        {/* Primary columns (Product, Resources, Company) */}
        <div class="lg:col-span-9">
          <div class="grid grid-cols-2 gap-8 sm:grid-cols-3">
            {FOOTER_PRIMARY.map((col) => (
              <div>
                {col.titleHref ? (
                  <a href={col.titleHref} class="mb-4 block text-sm font-semibold text-gray-900 hover:text-zenml-500">
                    {col.title}
                  </a>
                ) : (
                  <div class="mb-4 text-sm font-semibold text-gray-900">{col.title}</div>
                )}
                <ul class="space-y-2">
                  {col.links.map((link) => (
                    <li>
                      <a
                        href={link.href}
                        class="inline-flex items-center gap-2 text-sm text-gray-600 transition-colors hover:text-gray-900"
                        target={link.external ? "_blank" : undefined}
                        rel={link.external ? "noopener noreferrer" : undefined}
                      >
                        {link.label}
                        {link.badge && (
                          <span class="rounded-full bg-zenml-50 px-2 py-0.5 text-xs font-medium text-zenml-600">
                            {link.badge}
                          </span>
                        )}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* VS comparison + extended columns */}
      <div class="mt-10 border-t border-gray-100 pt-10">
        <div class="grid grid-cols-2 gap-8 sm:grid-cols-3 lg:grid-cols-6">
          {[...FOOTER_VS, ...FOOTER_EXTENDED].map((col) => (
            <div>
              {col.titleHref ? (
                <a href={col.titleHref} class="mb-4 block text-sm font-semibold text-gray-900 hover:text-zenml-500">
                  {col.title}
                </a>
              ) : (
                <div class="mb-4 text-sm font-semibold text-gray-900">{col.title}</div>
              )}
              {col.links.length > 0 && (
                <ul class="space-y-2">
                  {col.links.map((link) => (
                    <li>
                      <a
                        href={link.href}
                        class="text-sm text-gray-600 transition-colors hover:text-gray-900"
                        target={link.external ? "_blank" : undefined}
                        rel={link.external ? "noopener noreferrer" : undefined}
                      >
                        {link.label}
                      </a>
                    </li>
                  ))}
                </ul>
              )}
            </div>
          ))}
        </div>
      </div>

      {/* Legal row */}
      <div class="mt-10 flex flex-col items-center justify-between gap-4 border-t border-gray-200 pt-8 sm:flex-row">
        <p class="text-sm text-gray-500">&copy; {currentYear} ZenML. All rights reserved.</p>
        <div class="flex flex-wrap items-center gap-4">
          {FOOTER_LEGAL.map((link, i) => (
            <>
              <a
                href={link.href}
                class="text-sm text-gray-500 transition-colors hover:text-gray-700"
                target={link.external ? "_blank" : undefined}
                rel={link.external ? "noopener noreferrer" : undefined}
              >
                {link.label}
              </a>
              {i < FOOTER_LEGAL.length - 1 && (
                <span class="hidden text-gray-300 sm:inline">|</span>
              )}
            </>
          ))}
        </div>
      </div>
    </div>
  </div>
</footer>
